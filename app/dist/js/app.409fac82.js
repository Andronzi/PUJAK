(()=>{"use strict";var t={8688:(t,e,r)=>{var a=r(8935),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("Header",[r("CloseButton")],1),r("Content",{attrs:{header:!0,footer:!1,scroll:!0,scrollbar:!0}},[r("div",{staticClass:"text-center mt-4 text-xl font-bold"},[t._v("Vue miniapp template")]),r("div",{staticClass:"mt-6 text-center"},[r("Button",{staticClass:"w-28",on:{setBarcode:t.setBarcode}},[r("template",{slot:"text"},[t._v("Read QR")])],2)],1),t.barcode?r("div",{staticClass:"mx-2 mt-6 text-center"},[r("b",[t._v("Result:")]),r("br")]):t._e(),t._v(" "+t._s(this.barcode.result)+" "),r("b",[t._v("canvas")]),r("div",{staticClass:"mx-2 mt-6 text-center"},[r("canvas",{staticClass:"qr-content"})])])],1)},s=[],n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"fixed w-screen top-0 left-0 border-b z-10 bg-gray-50",class:t.$slots.default?"h-[var(--header-sait]":"h-[var(--sait)]"},[t.$slots.default?r("div",{staticClass:"mt-sait w-screen h-[var(--header-height)]"},[t._t("default")],2):t._e()])},l=[];const i={name:"Header"},c=i;var d=r(1001),u=(0,d.Z)(c,n,l,!1,null,null,null);const p=u.exports;var f=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"flex items-center w-screen h-full"},[r("button",{staticClass:"group flex flex-row outline-none h-8 items-center ml-0 pr-2",on:{click:t.onClick}},[r("svg",{staticClass:"h-6 w-6 group-active:stroke-orange-500",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[r("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"}})]),r("div",[t._v(t._s(t.name))])])])},h=[],m=r(2907),v=r.n(m);const g={name:"CloseButton",props:{name:{type:String,default:"Close"}},methods:{onClick(){v().miniapp.pop(!0,"")}}},k=g;var b=(0,d.Z)(k,f,h,!1,null,null,null);const x=b.exports;var w=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"w-screen",class:[t.header?"mt-[var(--header-sait)]":"",t.calc_height,t.scroll?"overflow-y-auto":"overflow-hidden",t.scrollbar?"scrollbar":""],attrs:{hidden:t.hidden},on:{scroll:t.onscroll}},[t._t("default")],2)},y=[];const _={name:"Content",props:{header:{type:Boolean,default:!0},footer:{type:Boolean,default:!1},scroll:{type:Boolean,default:!0},scrollbar:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},data(){return{timer:null}},computed:{calc_height(){return this.header?this.footer?"h-[calc(100vh-var(--header-sait)-var(--footer-saib))]":"h-[calc(100vh-var(--header-sait))]":this.footer?"h-[calc(100vh-var(--footer-saib))]":"h-screen"}},methods:{onscroll(t){t.target.scrollTop>10&&document.documentElement.style.setProperty("--scrollbar-opacity","block"),clearTimeout(this.timer),this.timer=setTimeout((()=>{document.documentElement.style.setProperty("--scrollbar-opacity","none")}),2e3)}}},C=_;var E=(0,d.Z)(C,w,y,!1,null,null,null);const B=E.exports;var T=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("button",{staticClass:"text-center px-4 py-2 rounded-md transition-all shadow-md ring-2 font-semibold",class:t.danger?"bg-white ring-red-500 active:ring-red-400 active:bg-red-50 m-0.5":"text-white bg-orange-500 ring-orange-500 active:bg-orange-400 active:ring-orange-400",on:{click:t.onClick}},[r("div",{staticClass:"flex items-center"},[r("LoadingIcon",{staticClass:"w-7 px-0.5 animate-spin-slow",attrs:{stroke:t.danger?"rgb(249 115 22)":"#fffff0",className:t.isLoading?"block":"hidden"}}),!t.isLoading&&t.isLoading||t.$slots.icon?r("div",{staticClass:"w-7"},[t._t("icon")],2):t._e(),r("div",{staticClass:"text-lg text-center w-full transition-padding",class:t.isLoading||t.$slots.icon?"pl-9 -ml-7":""},[t._t("text")],2)],1)])},O=[],L=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:t.className},[r("svg",{attrs:{version:"1.1",viewBox:"-58 -58 116 116",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[r("g",{attrs:{"stroke-linecap":"round","stroke-width":"15"}},[r("path",{attrs:{id:"a",d:"m0 35 0,14"}}),r("use",{attrs:{transform:"rotate(210)","xlink:href":"#a",stroke:t.stroke,opacity:"0.08"}}),r("use",{attrs:{transform:"rotate(240)","xlink:href":"#a",stroke:t.stroke,opacity:"0.16"}}),r("use",{attrs:{transform:"rotate(270)","xlink:href":"#a",stroke:t.stroke,opacity:"0.25"}}),r("use",{attrs:{transform:"rotate(300)","xlink:href":"#a",stroke:t.stroke,opacity:"0.33"}}),r("use",{attrs:{transform:"rotate(330)","xlink:href":"#a",stroke:t.stroke,opacity:"0.41"}}),r("use",{attrs:{transform:"rotate(0)","xlink:href":"#a",stroke:t.stroke,opacity:"0.50"}}),r("use",{attrs:{transform:"rotate(30)","xlink:href":"#a",stroke:t.stroke,opacity:"0.58"}}),r("use",{attrs:{transform:"rotate(60)","xlink:href":"#a",stroke:t.stroke,opacity:"0.67"}}),r("use",{attrs:{transform:"rotate(90)","xlink:href":"#a",stroke:t.stroke,opacity:"0.75"}}),r("use",{attrs:{transform:"rotate(120)","xlink:href":"#a",stroke:t.stroke,opacity:"0.83"}}),r("use",{attrs:{transform:"rotate(150)","xlink:href":"#a",stroke:t.stroke,opacity:"0.92"}}),r("use",{attrs:{transform:"rotate(180)","xlink:href":"#a",stroke:t.stroke,opacity:"1.0"}})])])])},$=[];const q={name:"LoadingIcon",props:{stroke:{type:String,default:""},className:{type:String,default:"#ffff00"}}},S=q;var I=(0,d.Z)(S,L,$,!1,null,null,null);const Z=I.exports,j={name:"Button",props:{danger:{type:Boolean,default:!1}},components:{LoadingIcon:Z},data(){return{isLoading:!1}},methods:{async onClick(){const t=await v().barcode.scan([v().barcode.symbology.qr]);this.$emit("setBarcode",t)}}},N=j;var R=(0,d.Z)(N,T,O,!1,null,null,null);const A=R.exports;var F=r(8733),M=r(905);async function P(){let t=v().sqlite.db_type.miniapp,e=await v().sqlite.get("SELECT id FROM id_table",t);return e}async function H(){await v().sqlite.run("CREATE TABLE IF NOT EXISTS id_table (id TEXT UNIQUE)","miniapp");let t=v().sqlite.db_type.miniapp;await v().sqlite.run(`INSERT INTO id_table (id) VALUES ("${(0,M.Z)()}")`,t);let e=await v().sqlite.get("SELECT id FROM id_table",t);return e}const U={name:"App",create(){window.addEventListener("load",this.onWindowLoad)},components:{Content:B,Header:p,CloseButton:x,Button:A},data(){return{id:"",barcode:"",count:0,spinner:!0}},methods:{setBarcode(t){this.barcode=t}},mounted(){P().then((t=>void 0!=t?t:H())).then((t=>this.id=t)).then((()=>{F.toCanvas(document.querySelector(".qr-content"),this.id,(t=>{console.log(t)}))})).catch((t=>{console.log(t)}))}},Q=U;var V=(0,d.Z)(Q,o,s,!1,null,null,null);const X=V.exports;new a.Z({render:t=>t(X)}).$mount("#app")}},e={};function r(a){var o=e[a];if(void 0!==o)return o.exports;var s=e[a]={exports:{}};return t[a].call(s.exports,s,s.exports,r),s.exports}r.m=t,(()=>{var t=[];r.O=(e,a,o,s)=>{if(!a){var n=1/0;for(d=0;d<t.length;d++){for(var[a,o,s]=t[d],l=!0,i=0;i<a.length;i++)(!1&s||n>=s)&&Object.keys(r.O).every((t=>r.O[t](a[i])))?a.splice(i--,1):(l=!1,s<n&&(n=s));if(l){t.splice(d--,1);var c=o();void 0!==c&&(e=c)}}return e}s=s||0;for(var d=t.length;d>0&&t[d-1][2]>s;d--)t[d]=t[d-1];t[d]=[a,o,s]}})(),(()=>{r.n=t=>{var e=t&&t.__esModule?()=>t["default"]:()=>t;return r.d(e,{a:e}),e}})(),(()=>{r.d=(t,e)=>{for(var a in e)r.o(e,a)&&!r.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}})(),(()=>{r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()})(),(()=>{r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})(),(()=>{var t={143:0};r.O.j=e=>0===t[e];var e=(e,a)=>{var o,s,[n,l,i]=a,c=0;if(n.some((e=>0!==t[e]))){for(o in l)r.o(l,o)&&(r.m[o]=l[o]);if(i)var d=i(r)}for(e&&e(a);c<n.length;c++)s=n[c],r.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return r.O(d)},a=globalThis["webpackChunkvue_miniapp_template"]=globalThis["webpackChunkvue_miniapp_template"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))})();var a=r.O(void 0,[998],(()=>r(8688)));a=r.O(a)})();