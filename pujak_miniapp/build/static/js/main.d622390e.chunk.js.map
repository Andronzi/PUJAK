{"version":3,"sources":["img/locations sync nonrecursive /.jpg$","img/locations/beach.jpg","img/locations/corporate_partyjpg.jpg","img/locations/embassy.jpg","img/locations/hospital.jpg","img/locations/ocean_liner.jpg","img/locations/orbital_station.jpg","img/locations/partisan_detachment.jpg","img/locations/pirate_ship.jpg","img/locations/polar_station.jpg","img/locations/police_station.jpg","img/locations/spa.jpg","img/locations/studio.jpg","img/locations/submarine.jpg","img/locations/supermarket.jpg","img/locations/terrorist_base.jpg","img/locations/theater.jpg","img/locations/university.jpg","img/locations/vegetable_warehouse.jpg","panels/LocationsPreview.js","hooks/playerContext.js","otherComponents/GameConfig.js","panels/Home.js","panels/Game.js","panels/GameEnd.js","App.js","index.js"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","r","playerContext","createContext","names","scores","roles","GameConfig","go","onClose","visible","useState","playersCount","setPlayersCount","pContext","useContext","setNames","setRoles","useEffect","i","push","createPlayerInputs","useCallback","inputs","style","display","Checkbox","value","onChange","prev","target","checked","newPlayers","placeholder","startGame","find","el","Math","floor","random","length","height","hidden","header","actions","mode","title","onClick","className","marginBottom","Home","setVisible","stretched","size","pathes","require","forEach","locationsContext","path","v4","src","LocationsPreview","goBack","locations","left","obj","Game","goDirect","locContext","index","activePanel","setActivePanel","timeLeft","interval","timer","setTimer","imgSrc","setImgSrc","gameEnd","clearInterval","tick","setInterval","margin","justifyContent","GameEnd","level","lightIndicator","setLightIndicator","bridge","send","Panel","App","scheme","setScheme","setUser","popout","setPopout","a","user","subscribe","detail","type","data","fetchData","currentTarget","dataset","to","ReactDOM","render","document","getElementById"],"mappings":"+FAAA,IAAIA,EAAM,CACT,cAAe,IACf,2BAA4B,IAC5B,gBAAiB,IACjB,iBAAkB,IAClB,oBAAqB,IACrB,wBAAyB,IACzB,4BAA6B,IAC7B,oBAAqB,IACrB,sBAAuB,IACvB,uBAAwB,IACxB,YAAa,IACb,eAAgB,IAChB,kBAAmB,IACnB,oBAAqB,IACrB,uBAAwB,IACxB,gBAAiB,IACjB,mBAAoB,IACpB,4BAA6B,KAI9B,SAASC,EAAeC,GACvB,IAAIC,EAAKC,EAAsBF,GAC/B,OAAOG,EAAoBF,GAE5B,SAASC,EAAsBF,GAC9B,IAAIG,EAAoBC,EAAEN,EAAKE,GAAM,CACpC,IAAIK,EAAI,IAAIC,MAAM,uBAAyBN,EAAM,KAEjD,MADAK,EAAEE,KAAO,mBACHF,EAEP,OAAOP,EAAIE,GAEZD,EAAeS,KAAO,WACrB,OAAOC,OAAOD,KAAKV,IAEpBC,EAAeW,QAAUR,EACzBS,EAAOC,QAAUb,EACjBA,EAAeE,GAAK,K,iCCvCpB,OAAe,cAA0B,mC,iCCAzC,OAAe,cAA0B,gD,iCCAzC,OAAe,cAA0B,qC,iCCAzC,OAAe,cAA0B,sC,iCCAzC,OAAe,cAA0B,yC,iCCAzC,OAAe,cAA0B,6C,iCCAzC,OAAe,cAA0B,iD,iCCAzC,OAAe,cAA0B,yC,iCCAzC,OAAe,cAA0B,2C,iCCAzC,OAAe,cAA0B,4C,iCCAzC,OAAe,cAA0B,iC,iCCAzC,OAAe,cAA0B,oC,iCCAzC,OAAe,cAA0B,uC,iCCAzC,OAAe,cAA0B,yC,iCCAzC,OAAe,cAA0B,4C,iCCAzC,OAAe,cAA0B,qC,iCCAzC,OAAe,cAA0B,wC,iCCAzC,OAAe,cAA0B,iD,4CCMrBY,E,mGCFLC,EAFOC,wBAAc,CAAEC,MAAO,GAAIC,OAAQ,GAAIC,MAAO,K,uBCgGrDC,EA5FI,SAAC,GAA8B,IAA5BC,EAA2B,EAA3BA,GAAIC,EAAuB,EAAvBA,QAASC,EAAc,EAAdA,QAC/B,EAAwCC,mBAAS,GAAjD,mBAAOC,EAAP,KAAqBC,EAArB,KACMC,EAAWC,qBAAWb,GAC5B,EAA0BS,mBAASG,EAASV,OAA5C,mBAAOA,EAAP,KAAcY,EAAd,KACA,EAA0BL,mBAASG,EAASR,OAA5C,mBAAOA,EAAP,KAAcW,EAAd,KAEAC,qBAAU,WACNJ,EAASV,MAAQ,GACjBU,EAAST,OAAS,GAClBS,EAASR,MAAQ,GACjB,IAAK,IAAIa,EAAI,EAAGA,EAAIP,IAAgBO,EAChCL,EAASV,MAAMgB,KAAK,gBACpBN,EAAST,OAAOe,KAAK,GACrBN,EAASR,MAAMc,KAAK,KAEzB,CAACR,IAEJ,IAAMS,EAAqBC,uBAAY,WAGnC,IAFA,IAAMC,EAAS,GAD0B,WAGhCJ,GACLI,EAAOH,KACH,sBAAaI,MAAO,CAAEC,QAAS,QAA/B,UACI,cAACC,EAAA,EAAD,CAAUC,MAAOrB,EAAMa,GAAIS,SAAU,SAAAnC,GACjCwB,GAAS,SAAAY,GAGL,OAFAA,EAAKV,IAAM1B,EAAEqC,OAAOC,QACpBjB,EAASR,MAAT,YAAqBuB,GACdf,EAASR,YAGxB,cAAC,IAAD,CACIsB,SAAU,gBAAGE,EAAH,EAAGA,OAAH,OAAgBd,GAAS,SAAAa,GAC/B,IAAMG,EAAU,YAAOH,GAGvB,OAFAG,EAAWb,GAAKW,EAAOH,MACvBb,EAASV,MAAT,YAAqB4B,GACdlB,EAASV,UAEpBuB,MAAoB,iBAAbvB,EAAMe,GAAwBf,EAAMe,GAAK,GAChDc,YAAW,sBAAiBd,OAhB1BA,KAFTA,EAAI,EAAGA,EAAIP,IAAgBO,EAAI,EAA/BA,GAwBT,OAAOI,IACR,CAACX,EAAcR,IAEZ8B,EAAYZ,uBAAY,SAAA7B,GACrBa,EAAM6B,MAAK,SAAAC,GAAE,OAAW,IAAPA,MAClBnB,GAAS,SAAAY,GAEL,OADAA,EAAKQ,KAAKC,MAAMD,KAAKE,SAAWV,EAAKW,SAAW,EACzCX,KAGfrB,EAAGf,KACJ,CAACe,EAAIF,EAAOW,IAEf,OACI,cAAC,IAAD,CACIO,MAAO,CAAEiB,OAAQ,SACjBC,QAAShC,EACTD,QAASA,EACTkC,OAAO,mBACPC,QACI,cAAC,IAAD,CACIC,KAAK,YACLC,MAAM,aACNC,QAASb,EACT,UAAQ,OAJZ,wBANR,SAgBI,sBAAKc,UAAU,aAAaxB,MAAO,CAAEiB,OAAQ,SAA7C,UACI,mBAAGO,UAAU,OAAb,2BACA,cAAC,IAAD,CACIpB,SAAU,gBAAGE,EAAH,EAAGA,OAAH,OAAgBjB,EAAgBiB,EAAOH,QACjD,aAAW,gBACXA,MAAOf,EACPkC,MAAM,gBACNtB,MAAO,CAAEyB,aAAc,SAE3B,sDACA,qBAAKzB,MAAO,CAAEyB,aAAc,QAA5B,SACM5B,YCnDP6B,EAjCF,SAAC,GAAgB,IAAd7D,EAAa,EAAbA,GAAImB,EAAS,EAATA,GACnB,EAA8BG,oBAAS,GAAvC,mBAAOD,EAAP,KAAgByC,EAAhB,KAEA,OAAO,eAAC,IAAD,CAAO9D,GAAIA,EAAX,UACN,cAAC,IAAD,8FAEA,cAAC,EAAD,CAAYmB,GAAIA,EAAIE,QAASA,EAASD,QAAS,kBAAM0C,GAAW,MAChE,cAAC,IAAD,CAAOR,OAAQ,cAAC,IAAD,CAAQE,KAAK,YAAb,kBAAwCH,OAAQhC,EAA/D,SACC,eAAC,IAAD,CAAKc,MAAO,CAACiB,OAAQ,QAArB,UACC,cAAC,IAAD,CAAQO,UAAU,OAAOI,WAAS,EAACC,KAAK,IAAIR,KAAK,YAAYE,QAAS,kBAAMI,GAAW,IAAvF,sBAGA,cAAC,IAAD,CAAQH,UAAU,OAAOI,WAAS,EAACC,KAAK,IAAIR,KAAK,YAAYE,QAASvC,EAAI,UAAQ,YAAlF,wC,SHfE8C,EAAS,IAEKrD,EAUTsD,QATL3D,OAAO4D,SAAQ,WACb,IAAMzD,EAASE,EAAC,WAAD,aAEf,IAAI,IAAIkB,KAAKpB,EACTuD,EAAOlC,KAAKrB,EAAOoB,OAOxB,IAAMsC,EAAmBtD,wBAAcmD,EAAOpE,KAAI,SAAAwE,GAAI,MAAK,CAAErE,GAAIsE,cAAMC,IAAKF,OAsBpEG,EAnBU,SAAC,GAAwB,IAAtBxE,EAAqB,EAArBA,GAAImB,EAAiB,EAAjBA,GAAIsD,EAAa,EAAbA,OAC1BC,EAAYhD,qBAAW0C,GAE7B,OACI,eAAC,IAAD,CAAOpE,GAAIA,EAAImC,MAAO,CAACiB,OAAQ,QAA/B,UACI,cAAC,IAAD,CAAauB,KAAM,cAAC,IAAD,CAAiBjB,QAASvC,EAAI,UAASsD,IAA1D,qBAGA,qBAAKtC,MAAO,CAACiB,OAAQ,QAArB,SACI,oBAAIO,UAAU,aAAd,SACKe,EAAU7E,KAAI,SAAA+E,GAAG,OAAI,6BAClB,qBAAKjB,UAAU,UAAUY,IAAKK,EAAIL,OADPK,EAAI5E,e,QIqDxC6E,EA/EF,SAAC,GAAoB,IAAnB7E,EAAkB,EAAlBA,GAAI8E,EAAc,EAAdA,SACTrD,EAAWC,qBAAWb,GACtBkE,EAAarD,qBAAW0C,GAE9B,EAAsC9C,mBAAS,CAAEtB,GAAI,kBAAmBgF,MAAO,IAA/E,mBAAOC,EAAP,KAAoBC,EAApB,KACA,EAA0B5D,mBAAS,CAAE6D,SAAU,EAAGC,SAAU,OAA5D,mBAAOC,EAAP,KAAcC,EAAd,KACA,EAA4BhE,mBAAS,GAArC,mBAAOiE,EAAP,KAAeC,EAAf,KAEMC,EAAUxD,uBAAY,WACxByD,cAAcL,EAAMD,UACpBN,MACD,IA2BH,OAzBAjD,qBAAU,WACN,IAAM8D,EAAO,WACLN,EAAMF,SAAW,GACjBM,IAGJH,GAAS,SAAA9C,GAAI,MAAK,CACd2C,SAAU3C,EAAK2C,SAAW,IAC1BC,SAAU5C,EAAK4C,cAIlBC,EAAMD,SAMPE,EAAS,CACLH,SAAUE,EAAMF,SAChBC,SAAUQ,YAAYD,EAAM,OAPhCL,EAAS,CACLH,SAAU,IAAQ1D,EAASV,MAAMoC,OACjCiC,SAAUQ,YAAYD,EAAM,SAQrC,IAGC,eAAC,IAAD,CAAO3F,GAAIA,EAAX,UACI,cAAC,IAAD,0BAAuBqF,GAASA,EAAMF,SAAW,OACjD,cAAC,IAAD,UACI,eAAC,IAAD,CAAMF,YAAaA,EAAYjF,GAAImC,MAAO,CAAE0D,OAAQ,QAApD,UACI,cAAC,IAAD,CAAO7F,GAAG,kBAAV,SACI,sBAAK2D,UAAU,aAAf,UACI,8KAAiClC,EAASV,MAAMkE,EAAYD,UAC5D,cAAC,IAAD,CAAQrB,UAAU,OAAOD,QAAS,WAC9BwB,GAAe,SAAA1C,GAAI,kCAASA,GAAT,IAAexC,GAAI,gBACtCwF,EAAUT,EAAW/B,KAAKC,MAAM8B,EAAW5B,OAASH,KAAKE,WAAWqB,MAFxE,wBAQR,cAAC,IAAD,CAAOvE,GAAG,WAAV,SACI,qBAAKmC,MAAO,CAAEC,QAAQ,OAAQ0D,eAAgB,UAA9C,SACI,gCACI,8BACMrE,EAASR,MAAMgE,EAAYD,OAC3B,mFACA,qBAAKrB,UAAU,UAAUY,IAAKgB,MAEpC,cAAC,IAAD,CAAQxB,WAAS,EAACC,KAAK,IAAIL,UAAU,OAAOD,QAAS,WACjDwB,GAAe,SAAA1C,GAAI,MAAK,CACpBwC,OAAQxC,EAAKwC,MAAQ,GAAKvD,EAASV,MAAMoC,OACzCnD,GAAI,uBAHZ,kC,QCxCjB+F,EAxBC,SAAC,GAAQ,eACrB,IAAMtE,EAAWC,qBAAWb,GAC5B,EAA4CS,mBAAS,CAAE8D,SAAU,KAAMY,MAAO,IAA9E,mBAAOC,EAAP,KAAuBC,EAAvB,KAYA,OAVArE,qBAAU,WACFoE,EAAeb,UACfM,cAAcO,EAAeb,UAEjCa,EAAeb,SAAWQ,aAAY,WAClCM,GAAkB,SAAA1D,GAAI,kCAASA,GAAT,IAAewD,OAAQxD,EAAKwD,WAClDG,OAAOC,KAAK,wBAAyB,CAAC,MAASH,EAAeD,UAC/D,OACJ,IAEI,eAACK,MAAD,CAAOrG,GAAG,UAAV,UACH,qCACA,oBAAI2D,UAAU,aAAd,SACMlC,EAASR,MAAMpB,KAAI,SAACe,EAAGkB,GAAJ,OAAU,6BAC3B,sCAAQL,EAASV,MAAMe,GAAvB,+BAAiClB,EAAI,6CAAY,sGCmDlD0F,EApDH,WACX,MAA4BhF,mBAAS,gBAArC,mBAAOiF,EAAP,KAAeC,EAAf,KACA,EAAsClF,mBAAS,QAA/C,mBAAO2D,EAAP,KAAoBC,EAApB,KACA,EAA+B5D,mBAAS,MAAxC,mBAAoBmF,GAApB,WACA,EAA4BnF,mBAAS,cAAC,IAAD,CAAe0C,KAAK,WAAzD,mBAAO0C,EAAP,KAAeC,EAAf,KAEA9E,qBAAU,WAAM,4CAOf,4BAAA+E,EAAA,sEACoBT,IAAOC,KAAK,uBADhC,OACOS,EADP,OAECJ,EAAQI,GACRF,EAAU,MAHX,4CAPe,sBACfR,IAAOW,WAAU,YAAgC,IAAD,IAA5BC,OAAUC,EAAkB,EAAlBA,KAAMC,EAAY,EAAZA,KACtB,yBAATD,GACHR,EAAUS,EAAKV,WAHF,mCAYfW,KACE,IAEH,IAAM/F,EAAKc,uBAAY,SAAA7B,GACtB8E,EAAe9E,EAAE+G,cAAcC,QAAQC,MACrC,CAACnC,IAEEJ,EAAW7C,uBAAY,SAAAjC,GAAE,OAAK,WACnCkF,EAAelF,MACZ,CAACkF,IAEL,OACC,cAAC,IAAD,CAAgBqB,OAAQA,EAAxB,SACC,cAAC,IAAD,UACC,cAAC,IAAD,UACC,cAAC,IAAD,CAAaG,OAAQA,EAArB,SACC,cAAC,IAAD,UACC,eAAC,IAAD,CAAMzB,YAAaA,EAAnB,UACC,cAAC,EAAD,CAAMjF,GAAG,OAAOmB,GAAIA,IAEpB,cAAC,EAAD,CAAkBnB,GAAG,YAAYmB,GAAIA,EAAIsD,OAAO,SAEhD,cAAC,EAAD,CAAMzE,GAAG,OAAO8E,SAAUA,EAAS,aAEnC,cAAC,EAAD,kBCxDRqB,IAAOC,KAAK,gBAEZkB,IAASC,OAAO,cAAC,EAAD,IAASC,SAASC,eAAe,U","file":"static/js/main.d622390e.chunk.js","sourcesContent":["var map = {\n\t\"./beach.jpg\": 174,\n\t\"./corporate_partyjpg.jpg\": 175,\n\t\"./embassy.jpg\": 176,\n\t\"./hospital.jpg\": 177,\n\t\"./ocean_liner.jpg\": 178,\n\t\"./orbital_station.jpg\": 179,\n\t\"./partisan_detachment.jpg\": 180,\n\t\"./pirate_ship.jpg\": 181,\n\t\"./polar_station.jpg\": 182,\n\t\"./police_station.jpg\": 183,\n\t\"./spa.jpg\": 184,\n\t\"./studio.jpg\": 185,\n\t\"./submarine.jpg\": 186,\n\t\"./supermarket.jpg\": 187,\n\t\"./terrorist_base.jpg\": 188,\n\t\"./theater.jpg\": 189,\n\t\"./university.jpg\": 190,\n\t\"./vegetable_warehouse.jpg\": 191\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 173;","export default __webpack_public_path__ + \"static/media/beach.17420fb7.jpg\";","export default __webpack_public_path__ + \"static/media/corporate_partyjpg.243fb552.jpg\";","export default __webpack_public_path__ + \"static/media/embassy.ca5afa3d.jpg\";","export default __webpack_public_path__ + \"static/media/hospital.ed56359c.jpg\";","export default __webpack_public_path__ + \"static/media/ocean_liner.36fa27c6.jpg\";","export default __webpack_public_path__ + \"static/media/orbital_station.24b1e6c2.jpg\";","export default __webpack_public_path__ + \"static/media/partisan_detachment.ca0d19e2.jpg\";","export default __webpack_public_path__ + \"static/media/pirate_ship.b5ddfb1f.jpg\";","export default __webpack_public_path__ + \"static/media/polar_station.25b5eb1e.jpg\";","export default __webpack_public_path__ + \"static/media/police_station.1be3b703.jpg\";","export default __webpack_public_path__ + \"static/media/spa.fce20db7.jpg\";","export default __webpack_public_path__ + \"static/media/studio.25af27ff.jpg\";","export default __webpack_public_path__ + \"static/media/submarine.21c2cf71.jpg\";","export default __webpack_public_path__ + \"static/media/supermarket.6e88394d.jpg\";","export default __webpack_public_path__ + \"static/media/terrorist_base.b2578e7d.jpg\";","export default __webpack_public_path__ + \"static/media/theater.42c7b153.jpg\";","export default __webpack_public_path__ + \"static/media/university.e03166b2.jpg\";","export default __webpack_public_path__ + \"static/media/vegetable_warehouse.02bef6c3.jpg\";","import React, { createContext, useContext } from \"react\"\r\nimport { Panel, PanelHeader, PanelHeaderBack, View } from '@vkontakte/vkui';\r\nimport { v4 } from \"uuid\"\r\n\r\nconst pathes = []\r\n\r\nfunction requireAll(r) {\r\n    r.keys().forEach((...a) => {\r\n        const module = r(...a);\r\n        \r\n        for(let i in module){\r\n            pathes.push(module[i]);\r\n        }\r\n    });\r\n};\r\n\r\nrequireAll(require.context('../img/locations', false, /\\.jpg$/));\r\n\r\nexport const locationsContext = createContext(pathes.map(path => ({ id: v4(), src: path })))  \r\n\r\n\r\nconst LocationsPreview = ({ id, go, goBack }) => {\r\n    const locations = useContext(locationsContext)\r\n\r\n    return (\r\n        <Panel id={id} style={{height: \"100%\"}}>\r\n            <PanelHeader left={<PanelHeaderBack onClick={go} data-to={goBack}/>}>\r\n\t\t\t    Go back\r\n\t\t    </PanelHeader>\r\n            <div style={{height: \"100%\"}}>\r\n                <ul className=\"scrollable\">\r\n                    {locations.map(obj => <li key={obj.id}>\r\n                        <img className=\"listImg\" src={obj.src} />\r\n                    </li>)}\r\n                </ul>\r\n            </div>\r\n        </Panel>\r\n    )\r\n}\r\n\r\nexport default LocationsPreview","import React, { createContext } from \"react\"\r\n\r\nconst playerContext = createContext({ names: [], scores: [], roles: [] })\r\n\r\nexport default playerContext;","import React, { useState, useCallback, useContext, useEffect } from \"react\"\r\nimport { ModalCardBase, Input, Button } from '@vkontakte/vkui';\r\nimport playerContext from \"../hooks/playerContext\";\r\nimport \"../base.css\"\r\nimport { Checkbox } from \"@vkontakte/vkui/dist/components/Checkbox/Checkbox\";\r\n\r\nconst GameConfig = ({ go, onClose, visible }) => {\r\n    const [playersCount, setPlayersCount] = useState(3)\r\n    const pContext = useContext(playerContext)\r\n    const [names, setNames] = useState(pContext.names)\r\n    const [roles, setRoles] = useState(pContext.roles)\r\n\r\n    useEffect(() => {\r\n        pContext.names = [];\r\n        pContext.scores = [];\r\n        pContext.roles = [];\r\n        for (let i = 0; i < playersCount; ++i) {\r\n            pContext.names.push(\"default_name\")\r\n            pContext.scores.push(0)\r\n            pContext.roles.push(0)\r\n        }\r\n    }, [playersCount])\r\n\r\n    const createPlayerInputs = useCallback(() => {\r\n        const inputs = [];\r\n\r\n        for (let i = 0; i < playersCount; ++i) {\r\n            inputs.push(\r\n                <div key={i} style={{ display: \"flex\" }}>\r\n                    <Checkbox value={roles[i]} onChange={e => {\r\n                        setRoles(prev => {\r\n                            prev[i] = +e.target.checked\r\n                            pContext.roles = [...prev]\r\n                            return pContext.roles\r\n                        })\r\n                    }}/>\r\n                    <Input \r\n                        onChange={({ target }) => setNames(prev => {\r\n                            const newPlayers = [...prev]\r\n                            newPlayers[i] = target.value \r\n                            pContext.names = [...newPlayers]\r\n                            return pContext.names\r\n                        })}  \r\n                        value={names[i] !== \"default_name\" ? names[i] : \"\"}\r\n                        placeholder={`Player name ${i}`}\r\n                    />\r\n                </div> \r\n            )\r\n        }\r\n\r\n        return inputs\r\n    }, [playersCount, names])\r\n\r\n    const startGame = useCallback(e => {\r\n        if (!roles.find(el => el === 1)) {\r\n            setRoles(prev => {\r\n                prev[Math.floor(Math.random() * prev.length)] = 1\r\n                return prev;\r\n            })\r\n        }\r\n        go(e)\r\n    }, [go, roles, setRoles])\r\n\r\n    return (\r\n        <ModalCardBase \r\n            style={{ height: \"300px\" }}\r\n            hidden={!visible} \r\n            onClose={onClose} \r\n            header=\"Config your game\" \r\n            actions={\r\n                <Button \r\n                    mode=\"secondary\"\r\n                    title=\"Start game\"\r\n                    onClick={startGame}\r\n                    data-to=\"game\"\r\n                >\r\n                    Start game\r\n                </Button>\r\n            }\r\n        >\r\n            <div className=\"scrollable\" style={{ height: \"250px\" }}>\r\n                <a className=\"mrgn\">Players count</a>\r\n                <Input \r\n                    onChange={({ target }) => setPlayersCount(target.value)} \r\n                    aria-label=\"Players count\" \r\n                    value={playersCount}\r\n                    title=\"Players count\"\r\n                    style={{ marginBottom: \"5px\" }}\r\n                />\r\n                <h4>Is Spy | Player name</h4>\r\n                <div style={{ marginBottom: \"30px\" }}>\r\n                    { createPlayerInputs() }\r\n                </div>\r\n            </div>\r\n        </ModalCardBase>\r\n    )\r\n}\r\n\r\nexport default GameConfig","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { Panel, PanelHeader, Header, Button, Group, Div } from '@vkontakte/vkui';\r\nimport GameConfig from '../otherComponents/GameConfig.js'\r\nimport \"../base.css\"\r\n\r\nconst Home = ({ id, go }) => {\r\n\tconst [visible, setVisible] = useState(false)\r\n\r\n\treturn <Panel id={id}>\r\n\t\t<PanelHeader>Находка Шпиона</PanelHeader>\r\n\t\t\r\n\t\t<GameConfig go={go} visible={visible} onClose={() => setVisible(false)}/>\t\r\n\t\t<Group header={<Header mode=\"secondary\">Menu</Header>} hidden={visible}>\r\n\t\t\t<Div style={{height: \"100%\"}}>\r\n\t\t\t\t<Button className='mrgn' stretched size=\"l\" mode=\"secondary\" onClick={() => setVisible(true)}>\r\n\t\t\t\t\tNew game\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button className='mrgn' stretched size=\"l\" mode=\"secondary\" onClick={go} data-to=\"locations\">\r\n\t\t\t\t\tShow me locations\r\n\t\t\t\t</Button>\r\n\t\t\t</Div>\r\n\t\t</Group>\r\n\t</Panel>\r\n}\r\n\r\nHome.propTypes = {\r\n\tid: PropTypes.string.isRequired,\r\n\tgo: PropTypes.func.isRequired,\r\n\tfetchedUser: PropTypes.shape({\r\n\t\tphoto_200: PropTypes.string,\r\n\t\tfirst_name: PropTypes.string,\r\n\t\tlast_name: PropTypes.string,\r\n\t\tcity: PropTypes.shape({\r\n\t\t\ttitle: PropTypes.string,\r\n\t\t}),\r\n\t}),\r\n};\r\n\r\nexport default Home;\r\n","import React, { useContext, useState, useCallback, useEffect } from \"react\"\r\nimport { Panel, PanelHeader, Button, Group, View } from '@vkontakte/vkui';\r\nimport playerContext from \"../hooks/playerContext\";\r\nimport { locationsContext } from \"./LocationsPreview\";\r\n\r\nconst Game = ({id, goDirect}) => {\r\n    const pContext = useContext(playerContext)\r\n    const locContext = useContext(locationsContext)\r\n\r\n    const [activePanel, setActivePanel] = useState({ id: \"broadcastScreen\", index: 0})\r\n    const [timer, setTimer] = useState({ timeLeft: 0, interval: null })\r\n    const [imgSrc, setImgSrc] = useState(0)\r\n    \r\n    const gameEnd = useCallback(() => {\r\n        clearInterval(timer.interval)\r\n        goDirect()\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        const tick = () => {\r\n            if (timer.timeLeft < 0) {\r\n                gameEnd();\r\n            }\r\n\r\n            setTimer(prev => ({\r\n                timeLeft: prev.timeLeft - 1000,\r\n                interval: prev.interval\r\n            }))\r\n        }\r\n\r\n        if (!timer.interval) {\r\n            setTimer({\r\n                timeLeft: 60000 * pContext.names.length,\r\n                interval: setInterval(tick, 1000)\r\n            })\r\n        } else {\r\n            setTimer({\r\n                timeLeft: timer.timeLeft,\r\n                interval: setInterval(tick, 1000)\r\n            })\r\n        }\r\n    }, [])\r\n    \r\n    return (\r\n        <Panel id={id}>\r\n            <PanelHeader>{`time: ${timer && timer.timeLeft / 1000 }`}</PanelHeader>\r\n            <Group>\r\n                <View activePanel={activePanel.id} style={{ margin: \"10px\"}}>\r\n                    <Panel id=\"broadcastScreen\">\r\n                        <div className=\"overlapper\">\r\n                            <h2>{`Передайте телефон игроку ${pContext.names[activePanel.index]}`}</h2>\r\n                            <Button className=\"mrgn\" onClick={() => {\r\n                                setActivePanel(prev => ({...prev, id: \"location\"}))\r\n                                setImgSrc(locContext[Math.floor(locContext.length * Math.random())].src)\r\n                            }}>\r\n                                Ready\r\n                            </Button>\r\n                        </div>\r\n                    </Panel>\r\n                    <Panel id=\"location\">\r\n                        <div style={{ display:\"flex\", justifyContent: \"center\"}}>\r\n                            <div>\r\n                                <div>\r\n                                    { pContext.roles[activePanel.index] \r\n                                    ? <h1>  _ Вы шпион _</h1>\r\n                                    : <img className=\"listImg\" src={imgSrc}/> }\r\n                                </div>\r\n                                <Button stretched size=\"l\" className=\"mrgn\" onClick={() => {\r\n                                    setActivePanel(prev => ({\r\n                                        index: (prev.index + 1) % pContext.names.length, \r\n                                        id: \"broadcastScreen\"\r\n                                    }))\r\n                                }}>\r\n                                    Next\r\n                                </Button>\r\n                            </div>\r\n                        </div>\r\n                    </Panel>\r\n                </View>\r\n            </Group>\r\n        </Panel>\r\n    )\r\n}\r\n\r\nexport default Game;","import React, { useContext, useState, useEffect } from \"react\"\r\nimport playerContext from \"../hooks/playerContext\"\r\n\r\nconst GameEnd = ({}) => {\r\n    const pContext = useContext(playerContext)\r\n    const [lightIndicator, setLightIndicator] = useState({ interval: null, level: 0 })\r\n\r\n    useEffect(() => {\r\n        if (lightIndicator.interval) {\r\n            clearInterval(lightIndicator.interval)\r\n        }\r\n        lightIndicator.interval = setInterval(() => {\r\n            setLightIndicator(prev => ({...prev, level: !prev.level}))\r\n            bridge.send(\"VKWebAppFlashSetLevel\", {\"level\": lightIndicator.level});\r\n        }, 400)\r\n    }, [])\r\n\r\n    return <Panel id=\"gameEnd\">\r\n        <h2>END</h2>\r\n        <ul className=\"scrollable\">\r\n            { pContext.roles.map((r, i) => <li>\r\n                <a>{ `${pContext.names[i]} был ${r ? \"Шпиомом\" : \"Обычным игроком\"}`  }</a>\r\n            </li>)}\r\n        </ul>\r\n    </Panel>\r\n} \r\n\r\nexport default GameEnd","import React, { useState, useEffect, useCallback } from 'react';\r\nimport bridge from '@vkontakte/vk-bridge';\r\nimport { \r\n\tView, \r\n\tScreenSpinner, \r\n\tAdaptivityProvider, \r\n\tAppRoot, \r\n\tConfigProvider, \r\n\tSplitLayout, \r\n\tSplitCol, \r\n\tButton,\r\n\tPanel \r\n} from '@vkontakte/vkui';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\n\r\nimport Home from './panels/Home.js';\r\nimport LocationsPreview from \"./panels/LocationsPreview.js\"\r\nimport Game from \"./panels/Game.js\"\r\nimport GameEnd from \"./panels/GameEnd.js\"\r\n\r\nconst App = () => {\r\n\tconst [scheme, setScheme] = useState('bright_light')\r\n\tconst [activePanel, setActivePanel] = useState('home');\r\n\tconst [fetchedUser, setUser] = useState(null);\r\n\tconst [popout, setPopout] = useState(<ScreenSpinner size='large' />);\r\n\r\n\tuseEffect(() => {\r\n\t\tbridge.subscribe(({ detail: { type, data }}) => {\r\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\r\n\t\t\t\tsetScheme(data.scheme)\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tasync function fetchData() {\r\n\t\t\tconst user = await bridge.send('VKWebAppGetUserInfo');\r\n\t\t\tsetUser(user);\r\n\t\t\tsetPopout(null);\r\n\t\t}\r\n\t\tfetchData();\r\n\t}, []);\r\n\r\n\tconst go = useCallback(e => {\r\n\t\tsetActivePanel(e.currentTarget.dataset.to)\r\n\t}, [setActivePanel])\r\n\r\n\tconst goDirect = useCallback(id => (() => {\r\n\t\tsetActivePanel(id)\r\n\t}), [setActivePanel])\r\n\r\n\treturn (\r\n\t\t<ConfigProvider scheme={scheme}>\r\n\t\t\t<AdaptivityProvider>\r\n\t\t\t\t<AppRoot >\r\n\t\t\t\t\t<SplitLayout popout={popout} >\r\n\t\t\t\t\t\t<SplitCol>\r\n\t\t\t\t\t\t\t<View activePanel={activePanel}>\r\n\t\t\t\t\t\t\t\t<Home id='home' go={go} />\r\n\r\n\t\t\t\t\t\t\t\t<LocationsPreview id=\"locations\" go={go} goBack=\"home\" />\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<Game id=\"game\" goDirect={goDirect(\"gameEnd\")}/>\r\n\r\n\t\t\t\t\t\t\t\t<GameEnd />\r\n\t\t\t\t\t\t\t</View>\r\n\t\t\t\t\t\t</SplitCol>\r\n\t\t\t\t\t</SplitLayout>\r\n\t\t\t\t</AppRoot>\r\n\t\t\t</AdaptivityProvider>\r\n\t\t</ConfigProvider>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\nimport App from \"./App\";\r\n\r\n// Init VK  Mini App\r\nbridge.send(\"VKWebAppInit\");\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\nif (process.env.NODE_ENV === \"development\") {\r\n  import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\r\n}\r\n"],"sourceRoot":""}