(this["webpackJsonpmini-app"]=this["webpackJsonpmini-app"]||[]).push([[0],{173:function(e,t,c){var n={"./beach.jpg":174,"./corporate_partyjpg.jpg":175,"./embassy.jpg":176,"./hospital.jpg":177,"./ocean_liner.jpg":178,"./orbital_station.jpg":179,"./partisan_detachment.jpg":180,"./pirate_ship.jpg":181,"./polar_station.jpg":182,"./police_station.jpg":183,"./spa.jpg":184,"./studio.jpg":185,"./submarine.jpg":186,"./supermarket.jpg":187,"./terrorist_base.jpg":188,"./theater.jpg":189,"./university.jpg":190,"./vegetable_warehouse.jpg":191};function a(e){var t=i(e);return c(t)}function i(e){if(!c.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=i,e.exports=a,a.id=173},174:function(e,t,c){"use strict";c.r(t),t.default=c.p+"static/media/beach.17420fb7.jpg"},175:function(e,t,c){"use strict";c.r(t),t.default=c.p+"static/media/corporate_partyjpg.243fb552.jpg"},176:function(e,t,c){"use strict";c.r(t),t.default=c.p+"static/media/embassy.ca5afa3d.jpg"},177:function(e,t,c){"use strict";c.r(t),t.default=c.p+"static/media/hospital.ed56359c.jpg"},178:function(e,t,c){"use strict";c.r(t),t.default=c.p+"static/media/ocean_liner.36fa27c6.jpg"},179:function(e,t,c){"use strict";c.r(t),t.default=c.p+"static/media/orbital_station.24b1e6c2.jpg"},180:function(e,t,c){"use strict";c.r(t),t.default=c.p+"static/media/partisan_detachment.ca0d19e2.jpg"},181:function(e,t,c){"use strict";c.r(t),t.default=c.p+"static/media/pirate_ship.b5ddfb1f.jpg"},182:function(e,t,c){"use strict";c.r(t),t.default=c.p+"static/media/polar_station.25b5eb1e.jpg"},183:function(e,t,c){"use strict";c.r(t),t.default=c.p+"static/media/police_station.1be3b703.jpg"},184:function(e,t,c){"use strict";c.r(t),t.default=c.p+"static/media/spa.fce20db7.jpg"},185:function(e,t,c){"use strict";c.r(t),t.default=c.p+"static/media/studio.25af27ff.jpg"},186:function(e,t,c){"use strict";c.r(t),t.default=c.p+"static/media/submarine.21c2cf71.jpg"},187:function(e,t,c){"use strict";c.r(t),t.default=c.p+"static/media/supermarket.6e88394d.jpg"},188:function(e,t,c){"use strict";c.r(t),t.default=c.p+"static/media/terrorist_base.b2578e7d.jpg"},189:function(e,t,c){"use strict";c.r(t),t.default=c.p+"static/media/theater.42c7b153.jpg"},190:function(e,t,c){"use strict";c.r(t),t.default=c.p+"static/media/university.e03166b2.jpg"},191:function(e,t,c){"use strict";c.r(t),t.default=c.p+"static/media/vegetable_warehouse.02bef6c3.jpg"},192:function(e,t,c){"use strict";c.r(t);var n,a=c(0),i=c(45),s=c.n(i),r=c(28),l=c.n(r),o=c(59),j=c(25),u=c(54),d=c.n(u),b=c(11),f=(c(171),c(52)),p=Object(a.createContext)({names:[],scores:[],roles:[]}),h=(c(58),c(44)),O=c(4),m=function(e){var t=e.go,c=e.onClose,n=e.visible,i=Object(a.useState)(3),s=Object(j.a)(i,2),r=s[0],l=s[1],o=Object(a.useContext)(p),u=Object(a.useState)(o.names),d=Object(j.a)(u,2),m=d[0],g=d[1],x=Object(a.useState)(o.roles),v=Object(j.a)(x,2),y=v[0],C=v[1];Object(a.useEffect)((function(){o.names=[],o.scores=[],o.roles=[];for(var e=0;e<r;++e)o.names.push("default_name"),o.scores.push(0),o.roles.push(0)}),[r]);var k=Object(a.useCallback)((function(){for(var e=[],t=function(t){e.push(Object(O.jsxs)("div",{style:{display:"flex"},children:[Object(O.jsx)(h.a,{value:y[t],onChange:function(e){C((function(c){return c[t]=+e.target.checked,o.roles=Object(f.a)(c),o.roles}))}}),Object(O.jsx)(b.h,{onChange:function(e){var c=e.target;return g((function(e){var n=Object(f.a)(e);return n[t]=c.value,o.names=Object(f.a)(n),o.names}))},value:"default_name"!==m[t]?m[t]:"",placeholder:"Player name ".concat(t)})]},t))},c=0;c<r;++c)t(c);return e}),[r,m]),_=Object(a.useCallback)((function(e){y.find((function(e){return 1===e}))||C((function(e){return e[Math.floor(Math.random()*e.length)]=1,e})),t(e)}),[t,y,C]);return Object(O.jsx)(b.i,{style:{height:"300px"},hidden:!n,onClose:c,header:"Config your game",actions:Object(O.jsx)(b.c,{mode:"secondary",title:"Start game",onClick:_,"data-to":"game",children:"Start game"}),children:Object(O.jsxs)("div",{className:"scrollable",style:{height:"250px"},children:[Object(O.jsx)("a",{className:"mrgn",children:"Players count"}),Object(O.jsx)(b.h,{onChange:function(e){var t=e.target;return l(t.value)},"aria-label":"Players count",value:r,title:"Players count",style:{marginBottom:"5px"}}),Object(O.jsx)("h4",{children:"Is Spy | Player name"}),Object(O.jsx)("div",{style:{marginBottom:"30px"},children:k()})]})})},g=function(e){var t=e.id,c=e.go,n=Object(a.useState)(!1),i=Object(j.a)(n,2),s=i[0],r=i[1];return Object(O.jsxs)(b.j,{id:t,children:[Object(O.jsx)(b.k,{children:"\u041d\u0430\u0445\u043e\u0434\u043a\u0430 \u0428\u043f\u0438\u043e\u043d\u0430"}),Object(O.jsx)(m,{go:c,visible:s,onClose:function(){return r(!1)}}),Object(O.jsx)(b.f,{header:Object(O.jsx)(b.g,{mode:"secondary",children:"Menu"}),hidden:s,children:Object(O.jsxs)(b.e,{style:{height:"100%"},children:[Object(O.jsx)(b.c,{className:"mrgn",stretched:!0,size:"l",mode:"secondary",onClick:function(){return r(!0)},children:"New game"}),Object(O.jsx)(b.c,{className:"mrgn",stretched:!0,size:"l",mode:"secondary",onClick:c,"data-to":"locations",children:"Show me locations"})]})})]})},x=c(194),v=[];(n=c(173)).keys().forEach((function(){var e=n.apply(void 0,arguments);for(var t in e)v.push(e[t])}));var y=Object(a.createContext)(v.map((function(e){return{id:Object(x.a)(),src:e}}))),C=function(e){var t=e.id,c=e.go,n=e.goBack,i=Object(a.useContext)(y);return Object(O.jsxs)(b.j,{id:t,style:{height:"100%"},children:[Object(O.jsx)(b.k,{left:Object(O.jsx)(b.l,{onClick:c,"data-to":n}),children:"Go back"}),Object(O.jsx)("div",{style:{height:"100%"},children:Object(O.jsx)("ul",{className:"scrollable",children:i.map((function(e){return Object(O.jsx)("li",{children:Object(O.jsx)("img",{className:"listImg",src:e.src})},e.id)}))})})]})},k=c(40),_=function(e){var t=e.id,c=e.goDirect,n=Object(a.useContext)(p),i=Object(a.useContext)(y),s=Object(a.useState)({id:"broadcastScreen",index:0}),r=Object(j.a)(s,2),l=r[0],o=r[1],u=Object(a.useState)({timeLeft:0,interval:null}),d=Object(j.a)(u,2),f=d[0],h=d[1],m=Object(a.useState)(0),g=Object(j.a)(m,2),x=g[0],v=g[1],C=Object(a.useCallback)((function(){clearInterval(f.interval),c()}),[]);return Object(a.useEffect)((function(){var e=function(){f.timeLeft<0&&C(),h((function(e){return{timeLeft:e.timeLeft-1e3,interval:e.interval}}))};f.interval?h({timeLeft:f.timeLeft,interval:setInterval(e,1e3)}):h({timeLeft:6e4*n.names.length,interval:setInterval(e,1e3)})}),[]),Object(O.jsxs)(b.j,{id:t,children:[Object(O.jsx)(b.k,{children:"time: ".concat(f&&f.timeLeft/1e3)}),Object(O.jsx)(b.f,{children:Object(O.jsxs)(b.p,{activePanel:l.id,style:{margin:"10px"},children:[Object(O.jsx)(b.j,{id:"broadcastScreen",children:Object(O.jsxs)("div",{className:"overlapper",children:[Object(O.jsx)("h2",{children:"\u041f\u0435\u0440\u0435\u0434\u0430\u0439\u0442\u0435 \u0442\u0435\u043b\u0435\u0444\u043e\u043d \u0438\u0433\u0440\u043e\u043a\u0443 ".concat(n.names[l.index])}),Object(O.jsx)(b.c,{className:"mrgn",onClick:function(){o((function(e){return Object(k.a)(Object(k.a)({},e),{},{id:"location"})})),v(i[Math.floor(i.length*Math.random())].src)},children:"Ready"})]})}),Object(O.jsx)(b.j,{id:"location",children:Object(O.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{children:n.roles[l.index]?Object(O.jsx)("h1",{children:"  _ \u0412\u044b \u0448\u043f\u0438\u043e\u043d _"}):Object(O.jsx)("img",{className:"listImg",src:x})}),Object(O.jsx)(b.c,{stretched:!0,size:"l",className:"mrgn",onClick:function(){o((function(e){return{index:(e.index+1)%n.names.length,id:"broadcastScreen"}}))},children:"Next"})]})})})]})})]})},S=c(64),N=function(e){Object(S.a)(e);var t=Object(a.useContext)(p),c=Object(a.useState)({interval:null,level:0}),n=Object(j.a)(c,2),i=n[0],s=n[1];return Object(a.useEffect)((function(){i.interval&&clearInterval(i.interval),i.interval=setInterval((function(){s((function(e){return Object(k.a)(Object(k.a)({},e),{},{level:!e.level})})),bridge.send("VKWebAppFlashSetLevel",{level:i.level})}),400)}),[]),Object(O.jsxs)(Panel,{id:"gameEnd",children:[Object(O.jsx)("h2",{children:"END"}),Object(O.jsx)("ul",{className:"scrollable",children:t.roles.map((function(e,c){return Object(O.jsx)("li",{children:Object(O.jsx)("a",{children:"".concat(t.names[c]," \u0431\u044b\u043b ").concat(e?"\u0428\u043f\u0438\u043e\u043c\u043e\u043c":"\u041e\u0431\u044b\u0447\u043d\u044b\u043c \u0438\u0433\u0440\u043e\u043a\u043e\u043c")})})}))})]})},E=function(){var e=Object(a.useState)("bright_light"),t=Object(j.a)(e,2),c=t[0],n=t[1],i=Object(a.useState)("home"),s=Object(j.a)(i,2),r=s[0],u=s[1],f=Object(a.useState)(null),p=Object(j.a)(f,2),h=(p[0],p[1]),m=Object(a.useState)(Object(O.jsx)(b.m,{size:"large"})),x=Object(j.a)(m,2),v=x[0],y=x[1];Object(a.useEffect)((function(){function e(){return(e=Object(o.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.send("VKWebAppGetUserInfo");case 2:t=e.sent,h(t),y(null);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}l.a.subscribe((function(e){var t=e.detail,c=t.type,a=t.data;"VKWebAppUpdateConfig"===c&&n(a.scheme)})),function(){e.apply(this,arguments)}()}),[]);var k=Object(a.useCallback)((function(e){u(e.currentTarget.dataset.to)}),[u]),S=Object(a.useCallback)((function(e){return function(){u(e)}}),[u]);return Object(O.jsx)(b.d,{scheme:c,children:Object(O.jsx)(b.a,{children:Object(O.jsx)(b.b,{children:Object(O.jsx)(b.o,{popout:v,children:Object(O.jsx)(b.n,{children:Object(O.jsxs)(b.p,{activePanel:r,children:[Object(O.jsx)(g,{id:"home",go:k}),Object(O.jsx)(C,{id:"locations",go:k,goBack:"home"}),Object(O.jsx)(_,{id:"game",goDirect:S("gameEnd")}),Object(O.jsx)(N,{})]})})})})})})};l.a.send("VKWebAppInit"),s.a.render(Object(O.jsx)(E,{}),document.getElementById("root"))},58:function(e,t,c){}},[[192,1,2]]]);
//# sourceMappingURL=main.d622390e.chunk.js.map